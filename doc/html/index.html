<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Simulateur du jeu d&#39;instructions d&#39;un processeur simple: Simulation du jeu d&#39;instruction d&#39;un processeur simple</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Simulateur du jeu d&#39;instructions d&#39;un processeur simple
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- G√©n√©r√© par Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Page&#160;principale</span></a></li>
      <li><a href="annotated.html"><span>Structures&#160;de&#160;donn√©es</span></a></li>
      <li><a href="files.html"><span>Fichiers</span></a></li>
      <li><a href="dirs.html"><span>R√©pertoires</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('index.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Simulation du jeu d'instruction d'un processeur simple </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Cet exercice produit un simulateur pour un processeur hypoth√©tique et extr√™mement simplifi√©. Le processeur lui-m√™me est d√©crit dans la structure <a class="el" href="structMachine.html" title="Structure g√©n√©rale de la machine.">Machine</a> et ses formats d'instructions dans la structure <a class="el" href="unionInstruction.html" title="Structure d&#39;une instruction.">Instruction</a>.</p>
<h2><a class="anchor" id="code"></a>
Organisation des fichiers source et objets</h2>
<p>Le code est fourni sous forme de fichiers d'ent√™te (<code></code>.h) et d'une biblioth√®que binaire (<b>libsimul.a</b>). Le seul fichier <code></code>.c fourni (<code><a class="el" href="test__simul_8c.html" title="Test du simulateur.">test_simul.c</a></code>) contient la fonction <a class="el" href="test__simul_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Programme de test.">main()</a>.</p>
<p>Le code original complet est compos√© de 5 modules. Chaque module comporte un fichier <code></code>.h et un <code></code>.c de m√™me nom. Le fichier-source <code></code>.c n'est pas fourni mais le fichier-objet correspondant figure dans la biblioth√®que <code>libsimul.a</code>.</p>
<dl>
<dt>Module <code>machine</code> (<a class="el" href="machine_8h.html" title="Description de la structure du processeur et de sa m√©moire.">machine.h</a>, <a class="el" href="machine_8c.html">machine.c</a>, machine.o) </dt>
<dd><p class="startdd">Ce module d√©crit la structure g√©n√©rale de la machine pr√©charg√©e avec un programme et des donn√©es. Ce module d√©crit et permet d'initialiser les m√©moires d'instruction et de donn√©es et d'imprimer l'√©tat courant de la machine (instruction, donn√©es, registres). </p>
<p class="enddd"></p>
</dd>
<dt>Module <code>instruction</code> (<a class="el" href="instruction_8h.html" title="Description du jeu d&#39;instruction.">instruction.h</a>, <a class="el" href="instruction_8c.html">instruction.c</a>, instruction.o) </dt>
<dd><p class="startdd">La structure (le format) des instructions de la machine est d√©crit dans ce module qui fournit aussi une fonction de "d√©sassemblage" (<a class="el" href="instruction_8c.html#a437080d5e8c504588a47d0dba468492f" title="Impression d&#39;une instruction sous forme lisible (dÈsassemblage)">print_instruction()</a>) c'est-√†-dire d'impression d'une instruction sous une forme humainement sympathique. </p>
<p class="enddd"></p>
</dd>
<dt>Module <code>exec</code> (<a class="el" href="exec_8h.html" title="Ex√©cution d&#39;une instruction.">exec.h</a>, <a class="el" href="exec_8c.html">exec.c</a>, exec.o) </dt>
<dd><p class="startdd">On trouve dans ce module le code permettant le d√©codage et l'ex√©cution des instructions. </p>
<p class="enddd"></p>
</dd>
<dt>Module <code>error</code> (<a class="el" href="error_8h.html" title="Messages et codes d&#39;erreurs.">error.h</a>, <a class="el" href="error_8c.html">error.c</a>, error.o) </dt>
<dd><p class="startdd">C'est le module d'affichage (en clair) des messages d'erreurs et autre <em>warnings</em>. </p>
<p class="enddd"></p>
</dd>
<dt>Module <code>debug</code> (<a class="el" href="debug_8h.html" title="Fonctions de mise au point interactive.">debug.h</a>, <a class="el" href="debug_8c.html">debug.c</a>, debug.o) </dt>
<dd><p class="startdd">Ce module permet l'ex√©cution interactive en pas √† pas. Sa fonction <a class="el" href="debug_8c.html#a3a88fdc680b7a1ae8c4c7c8ddee730ab" title="Dialogue de mise au point interactive pour l&#39;instruction courante.">debug_ask()</a> est invoqu√©e apr√®s l'ex√©cution de chaque instruction de la machine et g√®re un dialogue permettant √† l'utilisateur d'afficher l'√©tat de la machine (contenu des m√©moires et des registres) ou de passer √† l'ex√©cution de l'instruction suivante. </p>
<p class="enddd"></p>
</dd>
<dt>Fichier <code><a class="el" href="test__simul_8c.html" title="Test du simulateur.">test_simul.c</a></code>  </dt>
<dd><p class="startdd">Ce fichier source contient la fonction <a class="el" href="test__simul_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Programme de test.">main()</a> qui</p>
<ul>
<li>
<p class="startli">d√©code les options de ligne de commande (voir plus loin)</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">initialise la machine avec le programme et les donn√©es initiales</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">affiche l'√©tat (m√©moires, registres) initial de la machine</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">ex√©cute compl√®tement le programme</p>
<p class="endli"></p>
</li>
<li>
affiche l'√©tat (m√©moires, registres) final de la machine </li>
</ul>
<p>Les options de la ligne de commande sont </p>
<dl>
<dt>-h </dt>
<dd><p class="startdd">Affiche un message d'aide ("help").</p>
<p class="enddd"></p>
</dd>
<dt>-d </dt>
<dd><p class="startdd">Lance l'ex√©cution en mode interactif pas √† pas ("debug").</p>
<p class="enddd"></p>
</dd>
<dt>-b </dt>
<dd><p class="startdd">Le dernier argument de la ligne de commande doit √™tre le nom d'un fichier <em>binaire</em> contenant une repr√©sentation du programme et de ses donn√©es. Le format de ce fichier est d√©crit avec la fonction <a class="el" href="machine_8c.html#ac59b88844961c2479108151e24dd555a" title="Lecture d&#39;un programme depuis un fichier binaire.">read_program()</a>. On en trouvera des exemples dans le repertoire Examples (fichiers <code></code>.bin).</p>
<p>Sans option <b>-b</b> la fonction <a class="el" href="test__simul_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Programme de test.">main()</a> choisit et ex√©cute un programme pr√©d√©fini (dans le fichier <code>prog.o</code> de la biblioth√®que <code>libsimul.a</code>).</p>
<p></p>
<p></p>
<p class="enddd"></p>
</dd>
</dl>
<dl class="attention"><dt><b>Attention:</b></dt><dd><em>Le code est √©crit en langage C et utilise la norme C99 (option <b>-std=c99</b> de <b>gcc</b>). Il ne compile pas en mode C90 !</em></dd></dl>
</dd>
</dl>
<h2><a class="anchor" id="make"></a>
Utilisation de la Makefile</h2>
<dl>
<dt>make </dt>
<dd><p class="startdd">Reconstruit l'ex√©cutable de test, <b>test_simul</b>. </p>
<p class="enddd"></p>
</dd>
<dt>make doc </dt>
<dd><p class="startdd">Reconstruit la documentation html dans doc/html. Requiert <a href="http://www.doxygen.org"><b>doxygen</b>. </a></p>
<p class="enddd"></p>
</dd>
<dt>make clean  </dt>
<dd><p class="startdd">D√©truit tous les fichiers objets g√©n√©r√©s mais pas l'ex√©cutable de test ni la documentation.</p>
<p class="enddd"></p>
</dd>
<dt>make clobber  </dt>
<dd><p class="startdd">D√©truit tous les fichiers g√©n√©r√©s y compris l'ex√©cutable de test (mais pas la documentation).</p>
<p class="enddd"></p>
</dd>
<dt>make clean_doc </dt>
<dd>D√©truit la documentation g√©n√©r√©e par <b>doxygen</b>.  </dd>
</dl>
<h2><a class="anchor" id="build"></a>
Construction et utilisation du simulateur</h2>
<h3><a class="anchor" id="build_init"></a>
Construction du simulateur initial</h3>
<p>Initialement il suffit de faire sous un <b>shell</b> quelconque </p>
<div class="fragment"><pre class="fragment">make
</pre></div><p> puis </p>
<div class="fragment"><pre class="fragment">test_simul
</pre></div><p> pour ex√©cuter le programme pr√©d√©fini. Ou alors </p>
<div class="fragment"><pre class="fragment">test_simul -d -b Examples/prog_subroutine.bin
</pre></div><p> pour ex√©cuter le programme dont le nom est indiqu√© en mode interactif.</p>
<h3><a class="anchor" id="build_yours"></a>
Int√©gration de votre propre code</h3>
<p>Pour int√©grer votre propre code, il suffit d'√©diter la Makefile pour ajouter vos propres fichiers <code></code>.c ; pour cela il vous suffit de d√©finir la variable de <b>make</b> nomm√©e <code>USERSRC</code> en y mettant la liste de vos propres fichiers <code></code>.c (elle est initialement vide) ; par exemple</p>
<div class="fragment"><pre class="fragment">USERSRC = machine.c debug.c 
</pre></div><p>puis de faire <b>make</b> pour reconstruire l'ex√©cutable <b>test_simul</b>. Cela compilera vos <code></code>.c et l'√©diteur de liens choisira les <code></code>.o correspondants de pr√©f√©rence √† ceux qui sont dans la biblioth√®que <code>libsimul.a</code>. Si vous ajoutez des <code></code>.h ils seront pris en compte par la reg√©n√©ration des d√©pendances (<code>depend.out</code>).</p>
<dl class="attention"><dt><b>Attention:</b></dt><dd><em><b>Ne modifiez pas les fichiers <code></code>.h fournis car les objets de <code>libsimul.a</code> en d√©pendent</b></em>.</dd></dl>
<dl class="author"><dt><b>Auteur:</b></dt><dd>Jean-Paul Rigault </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>Avril 2011 </dd></dl>
</div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">G√©n√©r√© le Jeudi Juin 12 2014 11:12:00 pour Simulateur du jeu d'instructions d'un processeur simple par
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
